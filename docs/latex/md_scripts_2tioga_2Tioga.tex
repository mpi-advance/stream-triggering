\chapter{Setup for Tioga}
\hypertarget{md_scripts_2tioga_2Tioga}{}\label{md_scripts_2tioga_2Tioga}\index{Setup for Tioga@{Setup for Tioga}}
\label{md_scripts_2tioga_2Tioga_autotoc_md1}%
\Hypertarget{md_scripts_2tioga_2Tioga_autotoc_md1}%
 \hypertarget{md_scripts_2tioga_2Tioga_autotoc_md2}{}\doxysection{\texorpdfstring{Building}{Building}}\label{md_scripts_2tioga_2Tioga_autotoc_md2}
Example scipts can be found in the {\ttfamily install} folder. Examples of compiling against and using the library (on Tioga) can be found in the {\ttfamily test} folder.

The rest of the examples below more general examples that may be incomplete, so don\textquotesingle{}t just copy paste them.


\begin{DoxyCode}{0}
\DoxyCodeLine{module\ load\ craype-\/accel-\/amd-\/gfx90a}
\DoxyCodeLine{module\ load\ rocm}
\DoxyCodeLine{}
\DoxyCodeLine{INSTALL\_DIR="{}"{}\ \#\ Fill\ in\ path\ to\ where\ you\ want\ to\ install\ library}
\DoxyCodeLine{LIBFABRIC\_DIR="{}"{}\ \#\ Fill\ in\ path\ to\ where\ libfabric\ is}
\DoxyCodeLine{}
\DoxyCodeLine{cmake\ -\/DUSE\_IMPLEMENTATION=CXI\ -\/DLIBFABRIC\_PREFIX=\$LIBFABRIC\_DIR\ -\/DCMAKE\_HIP\_ARCHITECTURES=gfx90a\ -\/DCMAKE\_CXX\_COMPILER=hipcc\ -\/DCMAKE\_C\_COMPILER=hipcc\ -\/DCMAKE\_INSTALL\_PREFIX=\$INSTALL\_DIR\ ..}

\end{DoxyCode}


Build using just HIP commands (and MPI). Currently, the {\ttfamily GPU\+\_\+\+MEM\+\_\+\+OPS} implementation also needs {\ttfamily USE\+\_\+\+GPU\+\_\+\+TYPE} to be specified ({\ttfamily AMD} or {\ttfamily NVIDIA}). {\ttfamily Release} mode to turn of debug print outs.


\begin{DoxyCode}{0}
\DoxyCodeLine{module\ load\ craype-\/accel-\/amd-\/gfx90a}
\DoxyCodeLine{module\ load\ rocm}
\DoxyCodeLine{}
\DoxyCodeLine{INSTALL\_DIR="{}"{}\ \#\ Fill\ in\ path\ to\ where\ you\ want\ to\ install\ library}
\DoxyCodeLine{cmake\ -\/DCMAKE\_BUILD\_TYPE=RELEASE\ -\/DUSE\_IMPLEMENTATION=GPU\_MEM\_OPS\ -\/DUSE\_GPU\_TYPE=AMD\ -\/DCMAKE\_HIP\_ARCHITECTURES=gfx90a\ -\/DCMAKE\_HIP\_COMPILER=CC\ -\/DCMAKE\_INSTALL\_PREFIX=\$INSTALL\_DIR\ ..}

\end{DoxyCode}
\hypertarget{md_scripts_2tioga_2Tioga_autotoc_md3}{}\doxysection{\texorpdfstring{Running}{Running}}\label{md_scripts_2tioga_2Tioga_autotoc_md3}
Script to compile\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{module\ load\ craype-\/accel-\/amd-\/gfx90a}
\DoxyCodeLine{module\ load\ rocm}
\DoxyCodeLine{}
\DoxyCodeLine{ST\_PATH="{}"{}\ \#\ Fill\ in\ path\ to\ where\ library\ is\ installed}
\DoxyCodeLine{ST\_LIB\_PATH=\$ST\_PATH/lib}
\DoxyCodeLine{ST\_INC\_PATH=\$ST\_PATH/include}
\DoxyCodeLine{}
\DoxyCodeLine{PROGRAM=cxi\_simple.cpp}
\DoxyCodeLine{}
\DoxyCodeLine{CC\ -\/D\_\_HIP\_PLATFORM\_AMD\_\_\ -\/O3\ -\/g\ -\/std=c++20\ -\/x\ hip\ \$PROGRAM\ -\/I\$ST\_INC\_PATH\ -\/L\$ST\_LIB\_PATH\ -\/o\ test\ -\/lstream-\/triggering}

\end{DoxyCode}


Script to run (slurm stuff is converted to flux automatically)\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{\#SBATCH\ -\/-\/nodes=2}
\DoxyCodeLine{\#SBATCH\ -\/-\/ntasks-\/per-\/node=1}
\DoxyCodeLine{\#SBATCH\ -\/-\/time=00:05:00}
\DoxyCodeLine{\#SBATCH\ -\/-\/partition=pdebug}
\DoxyCodeLine{}
\DoxyCodeLine{module\ load\ craype-\/accel-\/amd-\/gfx90a}
\DoxyCodeLine{module\ load\ rocm}
\DoxyCodeLine{}
\DoxyCodeLine{\#\ NEED\ THIS\ FOR\ CXI\ STUFF!}
\DoxyCodeLine{export\ HSA\_USE\_SVM=0}
\DoxyCodeLine{}
\DoxyCodeLine{export\ LD\_LIBRARY\_PATH=\$LD\_LIBRARY\_PATH:"{}"{}\ \#\ Fill\ in\ quotes\ with\ the\ final\ value\ of\ \$ST\_LIB\_PATH\ from\ compiling}
\DoxyCodeLine{}
\DoxyCodeLine{srun\ ./test}

\end{DoxyCode}


Submit job normally\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{sbatch\ ./run\_script.sh}

\end{DoxyCode}
 